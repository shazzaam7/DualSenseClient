<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:ui="using:FluentAvalonia.UI.Controls"
             xmlns:vm="clr-namespace:DualSenseClient.ViewModels.Pages"
             xmlns:ic="using:FluentIcons.Avalonia.Fluent"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="DualSenseClient.Views.Pages.SettingsPage"
             x:DataType="vm:SettingsPageViewModel">
    <Design.DataContext>
        <vm:SettingsPageViewModel />
    </Design.DataContext>
    <ScrollViewer Background="{DynamicResource ApplicationPageBackgroundThemeBrush}">
        <StackPanel Margin="20" Spacing="20" Background="{DynamicResource ApplicationPageBackgroundThemeBrush}">
            <!-- App Header -->
            <TextBlock Text="Settings"
                       FontSize="24"
                       FontWeight="SemiBold"
                       Foreground="{DynamicResource TextFillColorPrimaryBrush}" />
            <StackPanel Orientation="Horizontal" Spacing="15" Margin="0,0,0,10">
                <Image Source="/Assets/icon.png" Width="80" Height="80" VerticalAlignment="Center" />
                <StackPanel Orientation="Vertical" Spacing="5" VerticalAlignment="Center">
                    <TextBlock Text="DualSense Manager"
                               FontSize="24"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}" />
                    <TextBlock Text="{Binding ApplicationVersion, Mode=OneTime}"
                               FontSize="14"
                               Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                               Margin="1,0,0,0" />
                    <StackPanel Orientation="Horizontal">
                        <HyperlinkButton NavigateUri="https://github.com/shazzaam7/DualSenseClient"
                                         Content="Github"
                                         FontSize="12"
                                         Margin="-10,0,0,0" />
                        <HyperlinkButton NavigateUri="https://ko-fi.com/shazzaam"
                                         Content="Donate"
                                         FontSize="12" />
                    </StackPanel>
                </StackPanel>
            </StackPanel>

            <ui:SettingsExpander Header="Appearance"
                                 Description="Customize the look and feel of the application">
                <ui:SettingsExpander.IconSource>
                    <ic:SymbolIconSource Symbol="PaintBrush" />
                </ui:SettingsExpander.IconSource>
                <ui:SettingsExpander.Items>
                    <!-- Theme Selector -->
                    <ui:SettingsExpander Header="Theme"
                                         Description="Change the theme of DualSense Client">
                        <ui:SettingsExpander.IconSource>
                            <ic:SymbolIconSource Symbol="WeatherMoon" />
                        </ui:SettingsExpander.IconSource>
                        <ui:SettingsExpander.Footer>
                            <ComboBox ItemsSource="{Binding AvailableThemes}"
                                      SelectedItem="{Binding SelectedTheme}"
                                      MinWidth="150">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding DisplayName}" />
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>
                        </ui:SettingsExpander.Footer>
                    </ui:SettingsExpander>
                </ui:SettingsExpander.Items>
            </ui:SettingsExpander>

            <!-- Behavior -->
            <ui:SettingsExpander Header="Behavior"
                                 Description="Configure application behavior">
                <ui:SettingsExpander.IconSource>
                    <ic:SymbolIconSource Symbol="Window" />
                </ui:SettingsExpander.IconSource>
                <ui:SettingsExpander.Items>
                    <!-- Close to Tray Toggle -->
                    <ui:SettingsExpander Header="Close to Tray"
                                         Description="Minimize the application to the system tray instead of closing">
                        <ui:SettingsExpander.IconSource>
                            <ic:SymbolIconSource Symbol="ArrowEnterLeft" />
                        </ui:SettingsExpander.IconSource>
                        <ui:SettingsExpander.Footer>
                            <ToggleSwitch IsChecked="{Binding CloseToTray}" />
                        </ui:SettingsExpander.Footer>
                    </ui:SettingsExpander>
                    <!-- Start Minimized Toggle -->
                    <ui:SettingsExpander Header="Start Minimized"
                                         Description="Start the application minimized to the system tray">
                        <ui:SettingsExpander.IconSource>
                            <ic:SymbolIconSource Symbol="Window" />
                        </ui:SettingsExpander.IconSource>
                        <ui:SettingsExpander.Footer>
                            <ToggleSwitch IsChecked="{Binding StartMinimized}" />
                        </ui:SettingsExpander.Footer>
                    </ui:SettingsExpander>
                    <!-- Tray Battery Tracking Toggle -->
                    <ui:SettingsExpander Header="Tray Battery Tracking"
                                         Description="Show battery percentage in the system tray icon">
                        <ui:SettingsExpander.IconSource>
                            <ic:SymbolIconSource Symbol="Battery10" />
                        </ui:SettingsExpander.IconSource>
                        <ui:SettingsExpander.Footer>
                            <ToggleSwitch IsChecked="{Binding TrayBatteryTracking}" />
                        </ui:SettingsExpander.Footer>
                    </ui:SettingsExpander>
                </ui:SettingsExpander.Items>
            </ui:SettingsExpander>

            <!-- Debugging -->
            <ui:SettingsExpander Header="Debugging"
                                 Description="Configure logging and other diagnostics options">
                <ui:SettingsExpander.IconSource>
                    <ic:SymbolIconSource Symbol="Bug" />
                </ui:SettingsExpander.IconSource>
                <ui:SettingsExpander.Items>
                    <!-- Log Level Selector -->
                    <ui:SettingsExpander Header="Log Level"
                                         Description="{Binding SelectedLogLevel.Description}">
                        <ui:SettingsExpander.IconSource>
                            <ic:SymbolIconSource Symbol="DocumentText" />
                        </ui:SettingsExpander.IconSource>
                        <ui:SettingsExpander.Footer>
                            <ComboBox ItemsSource="{Binding AvailableLogLevels}"
                                      SelectedItem="{Binding SelectedLogLevel}"
                                      MinWidth="150">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding DisplayName}" />
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>
                        </ui:SettingsExpander.Footer>
                    </ui:SettingsExpander>
                </ui:SettingsExpander.Items>
            </ui:SettingsExpander>
        </StackPanel>
    </ScrollViewer>
</UserControl>